(this.webpackJsonpklipping=this.webpackJsonpklipping||[]).push([[0],{52:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);n(5);var c,r=n(1),a=n.n(r),i=n(17),o=n.n(i),s=(n(52),n(7)),u=n(9),d=n(0),l=n(6),b=n(3),f=n(2),p=n(8);!function(e){e.cutting="Cutting",e.metadata="Metadata",e.thumbnail="Thumbnail",e.finish="Finish"}(c||(c={}));var j={value:c.cutting},g=Object(p.c)({name:"mainMenuState",initialState:j,reducers:{setState:function(e,t){e.value=t.payload}}}),O=g.actions.setState,m=function(e){return e.mainMenuState.value},v=g.reducer,x=Object(p.c)({name:"finishState",initialState:{value:"Start processing",pageNumber:0},reducers:{setState:function(e,t){e.value=t.payload},setPageNumber:function(e,t){e.pageNumber=t.payload}}}),h=x.actions,y=h.setState,w=h.setPageNumber,S=function(e){return e.finishState.value},k=function(e){return e.finishState.pageNumber},I=x.reducer;var C,P=function(){return Object(d.c)(d.a,{styles:N})},N={name:"1bjjf7p",styles:"body{background-color:snow;font-size:medium;min-height:100vh;}"},D=Object(d.b)({borderRadius:"10px",cursor:"pointer",transitionDuration:"0.3s",transitionProperty:"transform","&:hover":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"},display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",textAlign:"center"},""),A=Object(d.b)({display:"flex",flexDirection:"row",gap:"20px"},""),T=function(e){var t=e.iconName,n=e.stateName,r=Object(f.b)(),a=Object(f.c)(m),i=Object(d.b)(Object(u.a)(Object(u.a)({width:"100%",height:"100px"},a===n&&{backgroundColor:"#DDD"}),{},{flexDirection:"column"}),"");return Object(d.c)("div",{css:Object(s.a)([D,i],""),title:n,onClick:function(){r(O(n)),n===c.finish&&r(w(0))}},Object(d.c)(l.a,{icon:t,size:"2x"}),Object(d.c)("div",null,n))},R=function(){return Object(d.c)("div",{style:{borderRight:"1px solid #BBB",width:"100px",display:"flex",flexDirection:"column",flexShrink:0,alignItems:"center",padding:"20px",gap:"30px"},title:"MainMenu"},Object(d.c)(T,{iconName:b.k,stateName:c.cutting}),Object(d.c)(T,{iconName:b.l,stateName:c.metadata}),Object(d.c)(T,{iconName:b.n,stateName:c.thumbnail}),Object(d.c)(T,{iconName:b.r,stateName:c.finish}))},E=n(22),z=n(10),W=n.n(z),M=n(13),B=n(42),L=n.n(B),F=new URLSearchParams(window.location.search);if(F.has("mediaPackageId")){var _=F.get("mediaPackageId");_&&(C=_)}var V=function(){var e=Object(M.a)(W.a.mark((function e(){var t,n,c,r,a,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n="/klipping").endsWith("/")||(n+="/"),c=Object({NODE_ENV:"production",PUBLIC_URL:"/klipping",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SETTINGS_PATH||"editor-settings.toml",r=c.startsWith("/")?"":n,a="".concat(window.location.origin).concat(r).concat(c),e.prev=5,e.next=8,fetch(a);case 8:i=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),console.warn("Could not access '".concat(c,"' due to network error!"),e.t0||""),e.abrupt("return",null);case 15:if(404!==i.status){e.next=20;break}return console.debug("'".concat(c,"' returned 404: ignoring")),e.abrupt("return",null);case 20:if(i.ok){e.next=23;break}return console.error("Fetching '".concat(c,"' failed: ").concat(i.status," ").concat(i.statusText)),e.abrupt("return",null);case 23:if(!(null===(t=i.headers.get("Content-Type"))||void 0===t?void 0:t.startsWith("text/html"))){e.next=26;break}return console.warn("'".concat(c,"' request has 'Content-Type: text/html' -> ignoring...")),e.abrupt("return",null);case 26:return e.prev=26,e.t1=L.a,e.next=30,i.text();case 30:return e.t2=e.sent,e.abrupt("return",(0,e.t1)(e.t2));case 34:throw e.prev=34,e.t3=e.catch(26),console.error("Could not parse '".concat(c,"' as TOML: "),e.t3),new SyntaxError("Could not parse '".concat(c,"' as TOML: ").concat(e.t3));case 38:case"end":return e.stop()}}),e,null,[[5,11],[26,34]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(M.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V().then((function(e){for(var t in e)"debugging"===t&&e[t].mediaPackageId&&(C=e[t].mediaPackageId)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=n(46);function Y(e){return H.apply(this,arguments)}function H(){return(H=Object(M.a)(W.a.mark((function e(t){var n,c,r,a,i,o,s,d,l,b,f=arguments;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},c=n.body,r=Object(U.a)(n,["body"]),a={"Content-Type":"application/json"},i=btoa(unescape(encodeURIComponent("admin:opencast"))),o={Authorization:"Basic ".concat(i)},s=Object(u.a)(Object(u.a)({method:c?"POST":"GET"},r),{},{headers:Object(u.a)(Object(u.a)(Object(u.a)({},a),r.headers),o)}),c&&(s.body=JSON.stringify(c)),e.prev=6,e.next=9,window.fetch(t,s);case 9:return b=e.sent,e.next=12,b.text();case 12:if(l=e.sent,d=l.length?JSON.parse(l):"",!b.ok){e.next=16;break}return e.abrupt("return",d);case 16:throw new Error(b.statusText);case 19:return e.prev=19,e.t0=e.catch(6),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:d));case 22:case"end":return e.stop()}}),e,null,[[6,19]])})))).apply(this,arguments)}Y.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y(e,Object(u.a)(Object(u.a)({},t),{},{method:"GET"}))},Y.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Y(e,Object(u.a)(Object(u.a)({},n),{},{body:t}))};var J=function(e,t){var n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n},G={isPlaying:!1,isPlayPreview:!0,currentlyAt:0,segments:[{id:Object(p.d)(),start:0,end:1,deleted:!1}],tracks:[],activeSegmentIndex:0,selectedWorkflowIndex:0,previewTriggered:!1,videoURLs:[],videoCount:0,duration:0,title:"",presenters:[],workflows:[],status:"idle",error:void 0},K=Object(p.b)("video/fetchVideoInformation",function(){var e=Object(M.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get("https://pyca.opencast.org/editor/".concat(t.mediaPackageId,"/edit.json"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q=Object(p.c)({name:"videoState",initialState:G,reducers:{setIsPlaying:function(e,t){e.isPlaying=t.payload},setIsPlayPreview:function(e,t){e.isPlayPreview=t.payload},setPreviewTriggered:function(e,t){e.previewTriggered=t.payload},setCurrentlyAt:function(e,t){e.currentlyAt=J(t.payload,3),X(e),ee(e)},setCurrentlyAtInSeconds:function(e,t){e.currentlyAt=J(1e3*t.payload,3),X(e),ee(e)},addSegment:function(e,t){e.segments.push(t.payload)},cut:function(e){if(e.segments[e.activeSegmentIndex].start===e.currentlyAt||e.segments[e.activeSegmentIndex].end===e.currentlyAt)return e;var t={id:Object(p.d)(),start:e.segments[e.activeSegmentIndex].start,end:e.currentlyAt,deleted:e.segments[e.activeSegmentIndex].deleted},n={id:Object(p.d)(),start:e.currentlyAt,end:e.segments[e.activeSegmentIndex].end,deleted:e.segments[e.activeSegmentIndex].deleted};e.segments.splice(e.activeSegmentIndex,1,t,n)},markAsDeletedOrAlive:function(e){e.segments[e.activeSegmentIndex].deleted=!e.segments[e.activeSegmentIndex].deleted},setSelectedWorkflowIndex:function(e,t){e.selectedWorkflowIndex=t.payload},mergeLeft:function(e){$(e,e.activeSegmentIndex,e.activeSegmentIndex-1)},mergeRight:function(e){$(e,e.activeSegmentIndex,e.activeSegmentIndex+1)}},extraReducers:function(e){e.addCase(K.pending,(function(e,t){e.status="loading"})),e.addCase(K.fulfilled,(function(e,t){e.status="success",e.videoURLs=t.payload.tracks.reduce((function(e,t){return e.push(t.uri),e}),[]),e.videoCount=t.payload.tracks.length,e.duration=t.payload.duration,e.title=t.payload.title,e.presenters=[],e.segments=Z(t.payload.segments,t.payload.duration),e.tracks=t.payload.tracks,e.workflows=t.payload.workflows.sort((function(e,t){return e.displayOrder>t.displayOrder?1:e.displayOrder<t.displayOrder?-1:0}))})),e.addCase(K.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),X=function(e){e.activeSegmentIndex=e.segments.findIndex((function(t){return t.start<=e.currentlyAt&&t.end>=e.currentlyAt})),e.activeSegmentIndex<0&&(e.activeSegmentIndex=0)},Z=function(e,t){var n=[];return 0===e.length&&n.push({id:Object(p.d)(),start:0,end:t,deleted:!1}),e.forEach((function(e){n.push({id:Object(p.d)(),start:e.start,end:e.end,deleted:e.deleted})})),n},$=function(e,t,n){n<0||n>e.segments.length-1||(e.segments[t].start=Math.min(e.segments[t].start,e.segments[n].start),e.segments[t].end=Math.max(e.segments[t].end,e.segments[n].end),e.segments.splice(n,1),X(e))},ee=function(e){if(e.isPlaying&&e.segments[e.activeSegmentIndex].deleted&&e.isPlayPreview){for(var t=e.segments[e.activeSegmentIndex].end,n=e.activeSegmentIndex;n<e.segments.length&&e.segments[n].deleted;)t=e.segments[n].end,n++;e.currentlyAt=t,e.previewTriggered=!0}},te=Q.actions,ne=te.setIsPlaying,ce=te.setIsPlayPreview,re=te.setCurrentlyAt,ae=te.setCurrentlyAtInSeconds,ie=(te.addSegment,te.cut),oe=te.markAsDeletedOrAlive,se=te.setSelectedWorkflowIndex,ue=te.mergeLeft,de=te.mergeRight,le=te.setPreviewTriggered,be=function(e){return e.videoState.isPlaying},fe=function(e){return e.videoState.isPlayPreview},pe=function(e){return e.videoState.previewTriggered},je=function(e){return e.videoState.currentlyAt},ge=function(e){return e.videoState.currentlyAt/1e3},Oe=function(e){return e.videoState.segments},me=function(e){return e.videoState.activeSegmentIndex},ve=function(e){return!e.videoState.segments[e.videoState.activeSegmentIndex].deleted},xe=function(e){return e.videoState.selectedWorkflowIndex},he=function(e){return e.videoState.videoURLs},ye=function(e){return e.videoState.videoCount},we=function(e){return e.videoState.duration},Se=function(e){return e.videoState.duration/1e3},ke=function(e){return e.videoState.title},Ie=function(e){return e.videoState.presenters},Ce=function(e){return e.videoState.tracks},Pe=function(e){return e.videoState.workflows},Ne=Q.reducer,De=n(43),Ae=n.n(De);var Te=function(e){var t=e.url,n=e.isMuted,c=Object(f.b)(),a=Object(f.c)(be),i=Object(f.c)(ge),o=Object(f.c)(Se),s=Object(f.c)(pe),u=Object(r.useRef)(null),l=Object(r.useState)(!1),b=Object(E.a)(l,2),p=b[0],j=b[1];return Object(r.useEffect)((function(){!a&&u.current&&p&&u.current.seekTo(i,"seconds"),s&&u.current&&p&&(u.current.seekTo(i,"seconds"),c(le(!1)))})),Object(d.c)(Ae.a,{url:t,ref:u,width:"100%",height:"auto",playing:a,muted:n,onProgress:function(e){J(i,3)!==J(e.playedSeconds,3)&&c(ae(e.playedSeconds))},progressInterval:100,onReady:function(){j(!0)},onEnded:function(){c(ne(!1)),c(ae(o))}})},Re={name:"vyrci0",styles:"cursor:pointer;transition-duration:0.3s;transition-property:transform;&:hover{transform:scale(1.1);}&:active{transform:scale(0.9);}"},Ee={name:"1gnq0uh",styles:"cursor:pointer;transition-duration:0.3s;transition-property:transform;&:hover{transform:scale(1.05);}"},ze={name:"1r139wu",styles:"display:inline-block;width:110px;"},We=function(){var e=Object(f.b)(),t=Object(f.c)(be),n=Object(f.c)(fe),c=Object(f.c)(je),r=Object(d.b)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",padding:"10px"},""),a=Object(d.b)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",padding:"10px",gap:"50px"},""),i=Re,o=Ee;return Object(d.c)("div",{css:r,title:"Video Controls"},Object(d.c)("div",{css:a,title:"Video Controls Top Row"},Object(d.c)("div",{style:{display:"flex",gap:"10px",width:"50px",justifyContent:"center"}},Object(d.c)(l.a,{icon:n?b.i:b.h,size:"1x",title:"Play Preview Icon"}),Object(d.c)(l.a,{css:o,icon:n?b.x:b.w,size:"1x",title:"Play Preview Switch: "+n,onClick:function(){return e(ce(!n))}})),Object(d.c)(l.a,{css:i,icon:t?b.m:b.o,size:"2x",title:"Play Button",onClick:function(){return e(ne(!t))}}),Object(d.c)("div",{css:ze},new Date(c||0).toISOString().substr(11,12))))},Me={name:"iqjf8m",styles:"font-size:large;"},Be=function(){var e=Object(f.c)(ke),t=Object(f.c)(Ie),n=Me;return Object(d.c)("div",{title:"Video Area Header"},Object(d.c)("div",{css:n,title:"Video Title"},e),Object(d.c)("div",{title:"Video Presenters"},"by ",t.join(", ")))},Le=function(){var e,t=Object(f.b)(),n=Object(f.c)(he),c=Object(f.c)(ye),a=Object(f.c)((function(e){return e.videoState.status})),i=Object(f.c)((function(e){return e.videoState.error}));Object(r.useEffect)((function(){"idle"===a&&t(K({mediaPackageId:C}))}),[a,t]),"loading"===a?e=Object(d.c)("div",{className:"loader"},"Loading..."):"success"===a?e="":"failed"===a&&(e=Object(d.c)("div",null,i));for(var o=[],s=0;s<c;s++)o.push(Object(d.c)(Te,{key:s,url:n[s],isMuted:0===s}));var u=Object(d.b)({display:"flex",width:"auto",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"10px",borderBottom:"1px solid #BBB"},""),l=Object(d.b)({backgroundColor:"black",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%"},"");return Object(d.c)("div",{css:u,title:"Video Area"},e,Object(d.c)(Be,null),Object(d.c)("div",{css:l,title:"Video Player Area"},o),Object(d.c)(We,null))},Fe=n(44),_e=n.n(Fe),Ve=n(45),qe=n.p+"static/media/placeholder_waveform.d23b087b.png";var Ue={name:"190c1k3",styles:"height:230px;"},Ye={name:"2q5poe",styles:"transform:scaleY(1.5) rotate(90deg);padding:5px;"},He=function(e){var t=e.timelineWidth,n=Object(f.b)(),c=Object(f.c)(be),i=Object(f.c)(je),o=Object(f.c)(we),s=Object(r.useState)({x:0,y:0}),u=Object(E.a)(s,2),p=u[0],j=u[1],g=Object(r.useState)(!1),O=Object(E.a)(g,2),m=O[0],v=O[1],x=Object(r.useRef)(0),h=a.a.useRef(null);Object(r.useEffect)((function(){i!==x.current&&(y(),x.current=i)})),Object(r.useEffect)((function(){i&&o&&j({x:i/o*t,y:0})}),[t]);var y=function(){var e=p.y;j({x:i/o*t,y:e})},w=Object(d.b)({backgroundColor:"rgba(255, 0, 0, 1)",height:"250px",width:"1px",position:"absolute",zIndex:2,boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center"},""),S=Object(d.b)({backgroundColor:"rgba(255, 255, 255, 1)",borderRadius:"10px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)",cursor:m?"grabbing":"grab",transitionDuration:"0.3s",transitionProperty:"transform","&:hover":{transform:"scale(1.1)"},"&:active":{transform:"scale(0.9)"}},""),k=Ye;return Object(d.c)(_e.a,{onStart:function(){v(!0)},onStop:function(e,c){var r=c.x,a=c.y;j({x:r,y:a}),n(re(r/t*o)),v(!1)},axis:"x",bounds:"parent",position:p,disabled:c,nodeRef:h},Object(d.c)("div",{ref:h,css:w,title:"Scrubber"},Object(d.c)("div",{css:S,title:"dragHandle"},Object(d.c)(l.a,{css:k,icon:b.a,size:"1x"}))))},Je=function(e){e.timelineWidth;var t=Object(f.c)(Oe),n=Object(f.c)(we),c=Object(f.c)(me),r=function(e,t){return e||t?e&&!t?"rgba(255, 0, 0, 0.4)":!e&&t?"rgba(0, 0, 200, 0.4)":e&&t?"rgba(200, 0, 0, 0.4)":void 0:"rgba(0, 0, 255, 0.4)"},a=Object(d.b)({display:"flex",flexDirection:"row",paddingTop:"10px"},"");return Object(d.c)("div",{css:a,title:"Segments"},t.map((function(e,t){return Object(d.c)("div",{key:e.id,title:"Segment",css:Object(s.a)({backgroundColor:r(e.deleted,c===t),borderRadius:"5px",borderStyle:"solid",borderColor:"white",borderWidth:"1px",boxSizing:"border-box",width:(e.end-e.start)/n*100+"%",height:"230px",zIndex:1},"")})})))},Ge=function(){var e=Object(Ve.a)(),t=e.ref,n=e.width,c=void 0===n?1:n,r=Object(d.b)({position:"relative",height:"250px",width:"100%"},"");return Object(d.c)("div",{ref:t,css:r,title:"Timeline"},Object(d.c)(He,{timelineWidth:c}),Object(d.c)("div",{css:Ue},Object(d.c)("img",{alt:"waveform2",src:qe,style:{position:"absolute",height:"230px",width:"100%",top:"10px"}}),Object(d.c)(Je,{timelineWidth:c})))},Ke={padding:"16px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"},Qe=function(e){var t=e.iconName,n=e.actionName,c=e.action,r=Object(f.b)();return Object(d.c)("div",{css:Object(s.a)([D,Ke],""),title:n,onClick:function(){return c?r(c()):""}},Object(d.c)(l.a,{icon:t,size:"1x"}),Object(d.c)("span",null,n))},Xe=function(){var e=Object(f.b)(),t=Object(f.c)(ve);return Object(d.c)("div",{css:Object(s.a)([D,Ke],""),title:t?"Delete":"Restore",onClick:function(){return e(oe())}},Object(d.c)(l.a,{icon:t?b.z:b.A,size:"1x"}),Object(d.c)("div",null,t?"Delete":"Restore"))},Ze=function(){var e=Object(d.b)({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"30px"},""),t=Object(d.b)({display:"flex",flexDirection:"row",gap:"30px"},"");return Object(d.c)("div",{css:e},Object(d.c)("div",{css:t},Object(d.c)(Qe,{iconName:b.f,actionName:"Cut",action:ie}),Object(d.c)(Xe,null),Object(d.c)(Qe,{iconName:b.t,actionName:"Merge Left",action:ue}),Object(d.c)(Qe,{iconName:b.u,actionName:"Merge Right",action:de})),Object(d.c)("div",{css:t},Object(d.c)(Qe,{iconName:b.p,actionName:"Reset changes",action:null}),Object(d.c)(Qe,{iconName:b.p,actionName:"Undo",action:null})))},$e=function(e){var t=e.iconName,n=e.stateName,c=Object(f.b)(),r=Object(d.b)({width:"250px",height:"220px",flexDirection:"column",fontSize:"x-large",gap:"30px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"},"");return Object(d.c)("div",{css:Object(s.a)([D,r],""),title:n,onClick:function(){c(y(n)),c(w(1))}},Object(d.c)(l.a,{icon:t,size:"2x"}),Object(d.c)("div",null,n))},et=function(){var e=Object(d.b)({display:"flex",flexDirection:"row",justifyContent:"space-around",gap:"30px"},"");return Object(d.c)("div",{css:e,title:"Finish Menu"},Object(d.c)($e,{iconName:b.q,stateName:"Save changes"}),Object(d.c)($e,{iconName:b.j,stateName:"Start processing"}),Object(d.c)($e,{iconName:b.v,stateName:"Discard changes"}))},tt={status:"idle",error:void 0},nt=Object(p.b)("video/postVideoInformation",function(){var e=Object(M.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.post("https://pyca.opencast.org/editor/".concat(t.mediaPackageId,"/edit.json"),{segments:rt(t.segments),tracks:t.tracks});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ct=Object(p.c)({name:"workflowPostState",initialState:tt,reducers:{},extraReducers:function(e){e.addCase(nt.pending,(function(e,t){e.status="loading"})),e.addCase(nt.fulfilled,(function(e,t){e.status="success"})),e.addCase(nt.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),rt=function(e){var t=[];return e.forEach((function(e){t.push({start:e.start,end:e.end,deleted:e.deleted,selected:!1})})),t},at=function(e){return e.workflowPostState.status},it=function(e){return e.workflowPostAndProcessState.error},ot=ct.reducer;var st={name:"1eijd7m",styles:"width:200px;padding:16px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);justify-content:space-around;"},ut=function(){var e=Object(f.b)(),t=Object(f.c)(Oe),n=Object(f.c)(Ce),c=Object(f.c)(at),r=b.q,a=!1;"loading"===c?(r=b.s,a=!0):"success"===c?(r=b.b,a=!1):"failed"===c&&(r=b.g,a=!1);var i=st;return Object(d.c)("div",{css:Object(s.a)([D,i],""),title:"Save Button",onClick:function(){return e(nt({segments:t,tracks:n,mediaPackageId:C}))}},Object(d.c)(l.a,{icon:r,spin:a,size:"1x"}),Object(d.c)("span",null,"Yes, Save changes"))},dt=function(){var e=Object(f.c)(S),t=Object(f.c)(at),n=Object(f.c)(it),c=Object(d.b)({height:"100%",display:"Save changes"!==e?"none":"flex",flexDirection:"column",alignItems:"center",gap:"30px"},""),r=Object(d.b)(Object(u.a)(Object(u.a)({},"failed"!==t&&{display:"none"}),{},{borderColor:"red",borderStyle:"dashed",fontWeight:"bold",padding:"10px"}),"");return Object(d.c)("div",{css:c,title:"Save Area"},Object(d.c)("span",null,"Save the changes you made, but the video will not be cut yet. ",Object(d.c)("br",null),'To make Opencast cut the video, please select "Process". ',Object(d.c)("br",null),"Doth thou truly wish tah save?"),Object(d.c)("div",{css:A},Object(d.c)(Dt,{pageNumber:0,label:"No, take me back",iconName:b.d}),Object(d.c)(ut,null)),Object(d.c)("div",{css:r,title:"Error Box"},Object(d.c)("span",null,"An error has occured. Please wait a bit and try again. Details: "),Object(d.c)("br",null),n,Object(d.c)("br",null)))},lt=Object(p.c)({name:"abortState",initialState:{value:!1},reducers:{setState:function(e,t){e.value=t.payload}}}),bt=lt.actions.setState,ft=function(e){return e.abortState.value},pt=lt.reducer;var jt={name:"1eijd7m",styles:"width:200px;padding:16px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);justify-content:space-around;"},gt=function(){var e=Object(f.b)(),t=jt;return Object(d.c)("div",{css:Object(s.a)([D,t],""),title:"Discard changes button",onClick:function(){return e(bt(!0))}},Object(d.c)(l.a,{icon:b.v,size:"1x"}),Object(d.c)("span",null,"Yes, discard changes"))},Ot=function(){var e=Object(f.c)(S),t=Object(d.b)({display:"Discard changes"!==e?"none":"flex",flexDirection:"column",alignItems:"center",gap:"30px"},"");return Object(d.c)("div",{css:t,title:"Abort Area"},Object(d.c)("span",null,"Discard all the changes you made? They will be lost forever! ",Object(d.c)("br",null),"Doth thou truly wish tah abort?"),Object(d.c)("div",{css:A},Object(d.c)(Dt,{pageNumber:0,label:"No, take me back",iconName:b.d}),Object(d.c)(gt,null)))},mt=function(e){var t=e.stateName,n=e.workflowIndex,c=Object(f.b)(),r=Object(f.c)(xe),a=Object(d.b)({backgroundColor:n!==r?"snow":"#DDD",padding:"16px"},"");return Object(d.c)("div",{css:Object(s.a)([D,a],""),title:"Workflow Button for "+t,onClick:function(){return c(se(n))}},Object(d.c)("span",null,t))},vt=function(){var e=Object(f.c)(Pe),t=Object(f.c)(S),n=Object(f.c)(k),c=Object(d.b)({display:"Start processing"===t&&1===n?"flex":"none",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"50px"},""),r=Object(d.b)({display:"flex",flexDirection:"column",alignItems:"left",gap:"20px"},"");return Object(d.c)("div",{css:c},Object(d.c)("h2",null,"Select a workflow"),Object(d.c)("div",{css:r,title:"Workflow Selection Area"},e.map((function(e,t){return Object(d.c)(mt,{key:t,stateName:e.name,workflowIndex:t})}))),Object(d.c)("div",null,"And this is where I would put a workflow description.... if I had one!"),Object(d.c)("div",{css:A},Object(d.c)(Dt,{pageNumber:0,label:"Take me back",iconName:b.d}),Object(d.c)(Dt,{pageNumber:2,label:"Continue",iconName:b.e})))},xt={status:"idle",error:void 0},ht=Object(p.b)("video/postVideoInformationWithWorkflow",function(){var e=Object(M.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.post("https://pyca.opencast.org/editor/".concat(t.mediaPackageId,"/edit.json"),{segments:rt(t.segments),tracks:t.tracks,workflows:t.workflowID});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),yt=Object(p.c)({name:"workflowPostAndProcessState",initialState:xt,reducers:{},extraReducers:function(e){e.addCase(ht.pending,(function(e,t){e.status="loading"})),e.addCase(ht.fulfilled,(function(e,t){e.status="success"})),e.addCase(ht.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),wt=function(e){return e.workflowPostAndProcessState.status},St=function(e){return e.workflowPostAndProcessState.error},kt=yt.reducer;var It={name:"1wbzqqt",styles:"padding:16px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);"},Ct=function(){var e=Object(f.b)(),t=Object(f.c)(Pe),n=Object(f.c)(xe),c=Object(f.c)(Oe),r=Object(f.c)(Ce),a=Object(f.c)(wt),i=b.j,o=!1;"loading"===a?(i=b.s,o=!0):"success"===a?(i=b.b,o=!1):"failed"===a&&(i=b.g,o=!1);var u=It;return Object(d.c)("div",{css:Object(s.a)([D,u],""),title:"Start processing button",onClick:function(){return e(ht({segments:c,tracks:r,mediaPackageId:C,workflowID:[t[n]]}))}},Object(d.c)(l.a,{icon:i,spin:o,size:"1x"}),Object(d.c)("span",null,"Yes, start processing"))},Pt=function(){var e=Object(f.c)(wt),t=Object(f.c)(St),n=Object(d.b)({display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",gap:"30px"},""),c=Object(d.b)(Object(u.a)(Object(u.a)({},"failed"!==e&&{display:"none"}),{},{borderColor:"red",borderStyle:"dashed",fontWeight:"bold",padding:"10px"}),"");return Object(d.c)("div",{css:n,title:"Workflow Configuration Area"},Object(d.c)("h2",null,"Workflow Configuration"),Object(d.c)(l.a,{icon:b.y,size:"10x"}),"Placeholder",Object(d.c)("div",null,"Satisfied with your configuration?"),Object(d.c)("div",{css:A},Object(d.c)(Dt,{pageNumber:1,label:"No, take me back",iconName:b.d}),Object(d.c)(Ct,null)),Object(d.c)("div",{css:c,title:"Error Box"},Object(d.c)("span",null,"An error has occured. Please wait a bit and try again. Details: "),Object(d.c)("br",null),t))};var Nt={name:"1eijd7m",styles:"width:200px;padding:16px;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);justify-content:space-around;"},Dt=function(e){var t=e.pageNumber,n=e.label,c=e.iconName,r=Object(f.b)(),a=Nt;return Object(d.c)("div",{css:Object(s.a)([D,a],""),title:n,onClick:function(){return r(w(t))}},Object(d.c)(l.a,{icon:c,size:"1x"}),Object(d.c)("span",null,n))},At=function(){var e=Object(f.c)(k),t=Object(d.b)({display:0!==e?"none":"block"},""),n=Object(d.b)({display:1!==e?"none":"block"},""),c=Object(d.b)({display:2!==e?"none":"block"},"");return Object(d.c)("div",{title:"Finish"},Object(d.c)("div",{css:t},Object(d.c)(et,null)),Object(d.c)("div",{css:n},Object(d.c)(dt,null),Object(d.c)(vt,null),Object(d.c)(Ot,null)),Object(d.c)("div",{css:c},Object(d.c)(Pt,null)))};var Tt={name:"8atqhb",styles:"width:100%;"},Rt=function(){var e=Object(f.c)(m),t=Object(d.b)({display:e!==c.cutting?"none":"flex",flexDirection:"column",justifyContent:"space-around",gap:"20px",paddingRight:"20px",paddingLeft:"20px"},""),n=Object(d.b)({display:e!==c.finish?"none":"flex",flexDirection:"column",justifyContent:"space-around",gap:"20px",paddingRight:"20px",height:"100%"},""),r=Object(d.b)({display:e===c.cutting||e===c.finish?"none":"flex",flexDirection:"column",alignItems:"center",padding:"20px",gap:"20px"},"");return Object(d.c)("div",{title:"MainMenuContext",css:Tt},Object(d.c)("div",{css:t,title:"Cutting Container"},Object(d.c)(Le,null),Object(d.c)(Ze,null),Object(d.c)(Ge,null)),Object(d.c)("div",{css:n,title:"Finish Container"},Object(d.c)(At,null)),Object(d.c)("div",{css:r},Object(d.c)(l.a,{icon:b.y,size:"10x"}),"Placeholder"))};var Et={name:"2ts5ex",styles:"width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px;gap:20px;"},zt=function(){var e=Object(f.c)(ft),t=Object(f.c)(wt),n=Object(f.c)(we),c=Et;return Object(d.c)("div",{css:c,title:"The last area"},Object(d.c)(l.a,{icon:e?b.v:"success"===t?b.c:b.p,size:"10x"}),e?"You really did it. All your changes are now lost forever. You can now continue doing whatever you want.":"success"===t?"Changes successfully saved to Opencast. Processing your changes may take up to\n              ".concat(new Date(2*n).toISOString().substr(11,8)," hours.\n              You can now close the editor."):"Now this is awkward. Something has gone very wrong.")},Wt=function(){var e=Object(f.c)(ft),t=Object(f.c)(wt),n={display:"flex",flexDirection:"row",height:"100%"};return Object(d.c)(a.a.Fragment,null,e||"success"===t?Object(d.c)(zt,null):Object(d.c)("div",{css:n,title:"Body"},Object(d.c)(R,null),Object(d.c)(Rt,null)))};var Mt,Bt=function(){return Object(d.c)("div",{className:"App"},Object(d.c)(P,null),Object(d.c)(Wt,null))},Lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,99)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},Ft=Object(p.a)({reducer:{mainMenuState:v,finishState:I,videoState:Ne,workflowPostState:ot,workflowPostAndProcessState:kt,abortState:pt}}),_t=Promise.race([q(),(Mt=300,new Promise((function(e,t){return setTimeout(e,Mt)})))]);_t.then((function(){o.a.render(Object(d.c)(a.a.StrictMode,null,Object(d.c)(f.a,{store:Ft},Object(d.c)(Bt,null))),document.getElementById("root"))}),(function(e){return t=Object(d.c)("p",null,"Fatal error while loading app: ".concat(e.message),Object(d.c)("br",null),"This might be caused by a incorrect configuration by the system administrator."),void o.a.render(t,document.getElementById("root"));var t})),Lt()}},[[98,1,2]]]);
//# sourceMappingURL=main.314d20ce.chunk.js.map